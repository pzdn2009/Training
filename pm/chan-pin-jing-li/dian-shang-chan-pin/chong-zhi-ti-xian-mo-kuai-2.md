# 充值提现模块2 

注：这边专门讲提现模块

# 1. 功能

用户侧：
* 输入充值金额，选择充值支付方式；
* 提交充值；
* 充值失败，显示原因；
* 充值成功，反馈到余额。

系统侧：
* 微信下单，支付授权；
* 支付宝下单，支付授权；
* 后台手动充值；
* 反馈到会员余额

# 2. 设计

## 2.1 充值单缓存

对于充值的时效性，一般要求都是很高的，确保在30分钟以内，
可以把充值的订单放在Redis中，以提高局部体验。

# 3. 抽象设计 

## 3.1 API层

* get余额：查询余额
* recharge(PaymentType)：选择支付方式进行充值
* getRechargeResult：获取充值结果

## 3.2 服务层

* recharge(Money)：直接用金额充值，提供给线下用户

## 3.3 存储层

* member_balance表
* recharge_logs表

一下两张表是支付相关的：
* pay_transactions表
* pay_logs表

