# 虚拟内存

![](/assets/osVM.png)

层次结构：虚拟内存 --> 物理内存 + 磁盘。


虚拟内存的基本思想是，每个进程有用独立的**逻辑地址空间**，内存被分为大小相等的多个块,称为页(Page)。每个页都是一段连续的地址。

当访问虚拟内存时，会访问MMU（内存管理单元）去匹配对应的物理地址，而如果虚拟内存的页并不存在于物理内存中，会产生**缺页中断**，从磁盘中取得缺的页放入内存，如果内存已满，还会根据某种算法将磁盘中的页换出。

而虚拟内存和物理内存的匹配是通过页表实现，**页表**存在MMU中，页表中每个项通常为32位，既4byte。除了存储虚拟地址和页框地址之外，还会存储一些标志位，比如是否缺页，是否修改过，写保护等。

在页表的概念上进行推广，产生二级页表。

Ref：https://blog.csdn.net/qq_15437629/article/details/79304190
