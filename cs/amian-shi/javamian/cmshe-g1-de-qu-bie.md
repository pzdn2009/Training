# CMS和G1的区别

## CMS 和 G1的区别

## CMS

特点：以获取**最短回收停顿时间**为目标的收集器，基于并发“**标记清理**”实现

过程：

1、初始标记：独占CPU（STW），仅标记GCroots能直接关联的对象 2、并发标记：可以和用户线程并行执行，标记所有可达对象 3、重新标记：独占CPU\(STW\)，对并发标记阶段用户线程运行产生的垃圾对象进行标记修正 4、并发清理：可以和用户线程并行执行，清理垃圾

## G1

是一款面向服务端应用的垃圾收集器

特点：

1、并行并发：G1能充分利用CPU、多核环境下的硬件优势，使用多个CPU（CPU或者CPU核心）来缩短stop-The-World停顿时间。 2、分代收集：分代概念在G1中依然得以保留。虽然G1可以不需要其它收集器配合就能独立管理整个GC堆，但它能够采用不同的方式去处理新创建的对象和已经存活了一段时间、熬过多次GC的旧对象以获取更好的收集效果。也就是说G1可以自己管理新生代和老年代了。 3、空间整合：由于G1使用了**独立区域（Region）概念**，G1从整体来看是基于“标记-整理”算法实现收集，从局部（两个Region）上来看是基于“复制”算法实现的，但无论如何，这两种算法都意味着G1运作期间不会产生内存空间碎片。 4、可预测的停顿：这是G1相对于CMS的另一大优势，降低停顿时间是G1和CMS共同的关注点，但G1除了追求低停顿外，还能建立可预测的停顿时间模型，能让使用这明确指定一个长度为M毫秒的时间片段内，消耗在垃圾收集上的时间不得超过N毫秒。

