# 用户、文件、目录

## User & Group

查看用户

```
who am i 
whoami
```

创建用户
```
sudo adduser username
ls /home #view the newuser's home
su -l username #switch to the new user.
```

删除用户
```
sudo deluser username --remove-home
```

查看用户组
```
groups pzdn
```

## File & Directory

**文件权限——drwxrwxrwx**

第一位表示文件类型，d directory ,- file ,l link,b block device,c charset device,s socket,p pipline。

r:read,w:write,x:execute。

**权限的意义**

- 文件：read表示是否可以读取此文件，write指写入、编辑、新增、修改，但是不代表删除，execute是运行文件。
- 目录：read表示是否具有权限来读取目录结构，write指新建文件和目录，**删除**文件和目录，重命名，移动，execute代表是否能够进入此目录，即使用cd能够跳转到。

修改用户组
```
chgrp [-R] GROUP FILE #-R表示递归，GROUP组名，FILE文件名
chgrp testing install.log #将install.log文件的组改为testing 
```

修改文件所有者
```
chown [-R] [OWNER][:[GROUP]] FILE#-R表示递归，OWNER文件所有者，GROUP组名，FILE文件名
sudo chown username filename
chown bin install.log #改到bin组
chown root:root install.log #改到root用户，root组
```

修改文件权限
```
chmod 700 FILE #改为rdx------，使用三位二进制表示的权限组合111(rwx)，110(rx-)，101（r-x），100（r--），0(---)
chmod go-rw iphone # g:group,o:other,u:user,使用guo来代表三个用户组，使用+/-来添加删除权限。
```

**目录**

```
tree / #显示目录树
```

**目录解释**

/bin
>重要执行文件，比如bash,cat,chmod,date,mkdir等。

/etc
>FHS中属于不变的，且不可分享的。
系统主要的配置文件几乎都放置在这个目录中。比如/etc/password，/etc/group，/etc/shadow等。FHS建议不要放置可执行文件在这个目录中。其中，重要的目录：
- /etc/init.d/：所有服务的默认启动脚本都是放在这里的。
- /etc/xinetd.d/：super daemon。
- /etc/X11：X Window有关的配置文件。

绝对路径以/开头；相对路径：.为当前目录，..上级目录，省略了/默认从当前目录开始

```
pwd #当前工作路径
cd .. #上级路径
cd ~  #home
cd -  #上一次work directory
```

**基本操作**

新建文件
```
touch test
```

新建目录
```
mkdir mydir
mkdir -p father/son/grandson #创建parent路径
```

复制文件
```
cp test father/son/grandson
```

复制目录
```
cp -r father family #r递归
```

删除文件
```
rm test
rm -f test #f强制
```

删除目录
```
rm -r family
```

移动文件
```
mv file1 Documents
```

重命名文件
```
mv file1 myfile
rename ‘s/\.txt/\.c/’ *.txt
rename ‘y/a-z/A-Z/’ *.c
```

查看文件
```
cp /etd/passwd .
cat passwd
cat -n passwd #n行数
nl -b a file
more passwd
less passwd
tail /etc/passwd
tail -n 1 /etc/passwd
```

查看文件类型
```
file /bin/ls
```

**文件打包与压缩**

打包就是把若干文件或文件夹放到一个tar文件中，但是不会压缩文件大小。

压缩就是在打包的基础上压缩文件的大小。

zip压缩
```
zip -r -q -o shiyanlou.zip /home/shiyanlou
du -h shiyanlou.zip
file shiyanlou.zip

zip -r -9 -q -o shiyanlou_9.zip /home/shiyanlou -x ~/*.zip
zip -r -1 -q -o shiyanlou_1.zip /home/shiyanlou -x ~/*.zip
zip -r -e -o shiyanlou_encryption.zip /home/shiyanlou
zip -r -l -o shiyanlou.zip /home/shiyanlou
```

参数解释：r递归，q静默， o输出，9最大压缩级别，1最小压缩级别，e加密，x排除，l兼容Windows系统

unzip
```
unzip shiyanlou.zip
unzip -q shiyanlou.zip -d ziptest
unzip -l shiyanlou.zip #只查看内容，不解压
unzip -O GBK 中文压缩文件.zip
```

rar
```
rar a shiyanlou.rar .  #
rar d shiyanlou.rar .zshrc #d 删除其中的文件
rar l shiyanlou.rar #l 列出

unrar x shiyanlou.rar

mkdir tmp
unrar e shiyanlou.rar tmp/ 
```
tar
```
tar -cf shiyanlou.tar ~ #将当前目录打包到shiyanlou.rar

mkdir tardir
tar -xf shiyanlou.tar -C tardir #解包
tar -tf shiyanlou.tar #查看包
tar -czf shiyanlou.tar.gz ~ #指定压缩方式
tar -xzf shiyanlou.tar.gz #指定解压方式
```
>参数解释：c创建一个打包文件，f指定文件名，v可视化，x解包，C已存在的目录，t只查看不解包，z使用GZip来压缩文件。

>参数分组：[c|x|t]只能选1，[z|j]只能选1，v可选，f放在最后，之后可以接上目录名。

```
tar -zcv -f filename.tar.gz dir/file #压缩
tar -ztv -f filename.tar.gz #查询
tar -zxv -f filename.tar.gz -C dir #解压 
```